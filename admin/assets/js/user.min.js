var userManager={submitDialogs:[],submitActions:[],addSubmitDialog:function(e){userManager.submitDialogs.push(e)},addSubmitAction:function(e){userManager.submitActions.push(e)},submitForm:function(e,t){var n=0,i=userManager.submitDialogs,a=userManager.submitActions;return t&&(e.action.value=t),validateForm(e)&&function t(){for(r in CKEDITOR.instances)CKEDITOR.instances[r].updateElement();for(r=0;r<i.length;r++)if(r==n){var s=i[r];if("confirmation"==s.type.toLowerCase()){if("function"!=typeof s.condition)return confirmDialog($.extend(s,{yesAction:function(){n++,t()}})),!1;if(s.condition(s))return confirmDialog($.extend(s,{yesAction:function(){n++,t()}})),!1;n++}else if("alert"==s.type.toLowerCase()){if("function"!=typeof s.condition)return alertDialog($.extend(s,{okAction:function(){n++,t()}})),!1;if(s.condition(s))return alertDialog($.extend(s,{okAction:function(){n++,t()}})),!1;n++}else if("validation"==s.type.toLowerCase())if("function"==typeof s.condition){if(s.condition(s))return alertDialog($.extend(s,{okAction:function(){n++}})),!1;n++}else n++;else n++}if(n==i.length){for(var r=0;r<a.length;r++)a[r]();actionModal(function(){e.submit()})}}(),!1},loadExtendedAttributes:function(e,t,n,i,a,s){var r="muraAction=cUsers.loadExtendedAttributes&baseID="+e+"&type="+t+"&subType="+n+"&siteID="+i+"&cacheid="+Math.random();siteID=i,context=a,themeAssetPath=s;var o=$("#extendSetsDefault");return o.length&&(o.html('<div class="load-inline"></div>'),$.ajax({url:"index.cfm?"+r,dataType:"text",success:function(e){-1!=e.indexOf("mura-primary-login-token")&&(location.href="./"),userManager.setExtendedAttributes(e)}})),!1},setExtendedAttributes:function(data){var r=eval("("+data+")");$("#extendSetsDefault").html(r.extended),$("#extendSetsBasic").html(r.basic),""==Mura.trim(r.extended)?$("#tabExtendedattributesLI,#tabExtendedattributes").addClass("hide"):$("#tabExtendedattributesLI,#tabExtendedattributes").removeClass("hide"),setHTMLEditors(),setDatePickers(".tab-content .datepicker",dtLocale),setColorPickers(".tab-content .mura-colorpicker"),setFinders(".tab-content .mura-ckfinder,.tab-content .mura-finder"),setToolTips(".tab-content"),setFileSelectors()},checkExtendSetTargeting:function(){var e=$(".extendset"),t=!1,n=!1,i=!0;if(e.length){for(var a=0;a<e.length;a++){var s=e[a];if(null!=s.getAttribute("categoryid")&&""!=s.getAttribute("categoryid")){if(!n){var r=document.form1.categoryID;n=!0}for(var o=0;o<r.length;o++){var d=r[o],l=r[o].value,u=s.getAttribute("categoryid");!t&&null!=l&&u.indexOf(l)>-1&&(t=!0,membership=d.checked)}t&&membership?(userManager.setFormElementsDisplay(s,""),s.style.display="",i=!1):(userManager.setFormElementsDisplay(s,"none"),s.style.display="none")}else userManager.setFormElementsDisplay(s,""),s.style.display="",i=!1;t=!1}i?($("#extendMessage").show(),$("#extendDL").hide()):($("#extendMessage").hide(),$("#extendDL").show())}},resetExtendedAttributes:function(e,t,n,i,a,s){this.loadExtendedAttributes(e,t,n,i,a,s)},setFormElementsDisplay:function(e,t){var n=e.getElementsByTagName("input");if(n.length)for(var i=0;i<n.length;i++)n[i].style.display=t;if((n=e.getElementsByTagName("textarea")).length)for(i=0;i<n.length;i++)n[i].style.display=t;if((n=e.getElementsByTagName("select")).length)for(i=0;i<n.length;i++)n[i].style.display=t}};